<!-- MATTORI Frame³ Configurator v17 — Shopify Product Page -->
<script>
(function(){
  var sheets = [
    'https://fonts.cdnfonts.com/css/nexa-bold',
    'https://cdn.jsdelivr.net/gh/vincemattise/mattori-configurator@v17/mattori-configurator.css'
  ];
  sheets.forEach(function(href){
    var l = document.createElement('link');
    l.rel = 'stylesheet';
    l.href = href;
    document.head.appendChild(l);
  });
})();
</script>

<div class="mattori-configurator">

  <div class="loading-overlay" id="loadingOverlay">
    <div class="spinner"></div>
  </div>

  <!-- ═══════════════════════════════════════════ -->
  <!-- ADMIN PANEL (verbergbaar in productie)      -->
  <!-- ═══════════════════════════════════════════ -->
  <div class="admin-panel" id="adminPanel">
    <div class="admin-panel-label">Admin</div>
    <div class="admin-panel-content">
      <div class="dropzone" id="dropzone">
        <div class="dropzone-icon">⬆</div>
        <div class="dropzone-text">Sleep FML hierheen</div>
      </div>
      <input type="file" id="fileInput" accept=".fml,.json">
      <div class="admin-buttons" id="uploadActions">
        <button class="btn-admin" id="btnDownloadFml">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="12" y1="18" x2="12" y2="12"/><polyline points="9 15 12 18 15 15"/></svg>
          FML
        </button>
        <button class="btn-admin" id="btnExport">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          OBJ
        </button>
      </div>
      <div class="file-label" id="fileLabel"></div>
      <div class="error-msg" id="errorMsg"></div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════ -->
  <!-- PRODUCT HERO (afbeelding + titel + prijs)   -->
  <!-- ═══════════════════════════════════════════ -->
  <div class="product-hero">
    <div class="product-hero-layout">

      <!-- Links: productafbeelding -->
      <div class="product-hero-image">
        <div class="product-image-wrapper">
          <span class="product-example-badge">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909M3.75 21h16.5A2.25 2.25 0 0 0 22.5 18.75V5.25A2.25 2.25 0 0 0 20.25 3H3.75A2.25 2.25 0 0 0 1.5 5.25v13.5A2.25 2.25 0 0 0 3.75 21Z" /></svg>
            Afbeelding toont een voorbeeld
          </span>
          <img src="https://cdn.shopify.com/s/files/1/0958/8614/7958/files/Productafbeelding_1.png?v=1770904048" alt="MATTORI Frame³ – voorbeeld van een 3D ingelijste plattegrond">
        </div>
      </div>

      <!-- Rechts: titel + prijs + beschrijving + Funda URL -->
      <div class="product-hero-info">
        <h1 class="product-title">MATTORI Frame³</h1>

        <div class="product-price-block">
          <span class="product-price-old">&euro;99,95</span>
          <span class="product-price-new">&euro;79,95</span>
          <span class="product-price-tax">incl. BTW</span>
        </div>

        <p class="product-description">
          Na ontvangst van je bestelling starten wij direct met het zorgvuldig omzetten van jouw 2D Funda-plattegrond naar een 3D model. Elk model wordt door het team van MATTORI handmatig opgebouwd met focus op een realistische weergave.
        </p>

        <!-- Funda URL input -->
        <div class="order-step" id="stepFundaUrl">
          <div class="step-label">Jouw Funda-link</div>
          <div class="url-input-group">
            <input type="url" id="fundaUrl" placeholder="https://www.funda.nl/..." />
            <button class="btn-export btn-funda" id="btnFunda">Laden</button>
          </div>
          <button class="btn-test" id="btnTest">Test met voorbeeldwoning</button>
          <div class="funda-status" id="fundaStatus">
            <div class="status-icon" id="fundaStatusIcon"></div>
            <div class="status-text" id="fundaStatusText"></div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- ═══════════════════════════════════════════ -->
  <!-- CONFIGURATOR FLOW (verschijnt na laden)     -->
  <!-- ═══════════════════════════════════════════ -->
  <div class="main-wrapper" id="mainWrapper">
    <div class="order-flow" id="orderFlow">

      <!-- Preview 1: Adres op bovenkant lijst -->
      <div class="order-step">
        <div class="frame-preview" id="framePreview">
          <div class="step-label">Adres preview</div>
          <div class="preview-card">
            <div class="frame-container">
              <img src="https://cdn.shopify.com/s/files/1/0958/8614/7958/files/Frame_template_2.png?v=1771077134"
                   class="frame-image" alt="MATTORI Frame³ bovenkant" crossorigin="anonymous" />
              <div class="frame-overlay">
                <div class="frame-address" id="frameAddress">
                  <div class="frame-street" id="frameStreet"></div>
                  <div class="frame-city" id="frameCity"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="address-edit-toggle">
            <input type="checkbox" id="addressEditToggle" />
            <label for="addressEditToggle">Ik wil het adres aanpassen</label>
          </div>

          <div class="address-fields" id="addressFields">
            <input type="text" id="addressStreet" placeholder="Straat + Huisnummer" />
            <input type="text" id="addressCity" placeholder="Stad, Land" />
          </div>
        </div>
      </div>

      <!-- Preview 2: 3D plattegronden -->
      <div class="order-step" id="stepViewers" style="display:none;">
        <div class="step-label">Jouw plattegronden</div>
        <div class="preview-card">
          <div class="frame-middle-wrap">
            <img src="https://cdn.shopify.com/s/files/1/0958/8614/7958/files/Frame_template_4.png?v=1771087445"
                 class="frame-middle-bg" alt="" crossorigin="anonymous" />
            <div class="frame-middle-content">
              <div class="floors-grid" id="floorsGrid"></div>
            </div>
          </div>
        </div>
        <div class="floor-checkboxes" id="floorCheckboxes"></div>
      </div>

      <!-- Preview 3: Labels onderkant lijst -->
      <div class="order-step" id="stepLabelsPreview" style="display:none;">
        <div class="labels-preview" id="labelsPreview">
          <div class="step-label">Labels preview</div>
          <div class="preview-card">
            <div class="labels-container">
              <img src="https://cdn.shopify.com/s/files/1/0958/8614/7958/files/Frame_template_3.png?v=1771077135"
                   class="labels-image" alt="MATTORI Frame³ onderkant" crossorigin="anonymous" />
              <div class="labels-overlay" id="labelsOverlay"></div>
            </div>
          </div>

          <div class="labels-edit-toggle">
            <input type="checkbox" id="labelsEditToggle" />
            <label for="labelsEditToggle">Ik wil de labels aanpassen</label>
          </div>
          <div class="labels-fields" id="labelsFields"></div>
        </div>
      </div>

      <!-- Opmerkingen -->
      <div class="order-step" id="stepRemarks" style="display:none;">
        <div class="step-label">Vragen of opmerkingen</div>
        <div class="remarks-field">
          <textarea id="remarksField" placeholder="Heb je speciale wensen of opmerkingen? Laat het hier weten..." rows="3"></textarea>
        </div>
      </div>

      <!-- Bestel knop -->
      <div class="order-step" id="stepOrder" style="display:none;">
        <button class="btn-order" id="btnOrder" disabled>Bestellen — &euro;79,95</button>
        <div class="order-return-notice">
          Let op: omdat elk Frame³ speciaal voor jouw woning wordt gemaakt, is retourneren niet mogelijk.
        </div>
      </div>

      <!-- Disclaimer -->
      <div class="order-step" id="stepDisclaimer" style="display:none;">
        <p class="disclaimer">Elk frame wordt met de hand samengesteld. De uiteindelijke compositie kan licht afwijken van de getoonde plattegronden.</p>
      </div>

    </div>
  </div>

  <!-- ═══════════════════════════════════════════ -->
  <!-- PRODUCT DETAILS (onder configurator)        -->
  <!-- ═══════════════════════════════════════════ -->
  <div class="product-details">
    <div class="product-details-layout">

      <!-- Specificaties -->
      <div class="product-specs">
        <div class="product-specs-title">Specificaties</div>
        <ul class="product-specs-list">
          <li><span class="spec-label">Materiaal lijst</span><span class="spec-value">Duurzaam kunststof</span></li>
          <li><span class="spec-label">Materiaal 3D plattegrond</span><span class="spec-value">Duurzaam kunststof</span></li>
          <li><span class="spec-label">Materiaal glas</span><span class="spec-value">Echt en verhard</span></li>
          <li><span class="spec-label">Materiaal papier</span><span class="spec-value">Premium textuur</span></li>
          <li><span class="spec-label">Afmeting</span><span class="spec-value">24 &times; 32,8 &times; 2,9 cm</span></li>
          <li><span class="spec-label">Gewicht</span><span class="spec-value">&plusmn; 750g</span></li>
        </ul>
      </div>

      <!-- Info badges -->
      <div class="product-badges">
        <div class="product-badge">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12" /></svg>
          Gratis verzending met PostNL
        </div>
        <div class="product-badge">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg>
          Vandaag besteld, binnen 5 werkdagen in huis
        </div>
        <div class="product-badge">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z" /></svg>
          Handgemaakt in Nederland
        </div>
      </div>

    </div>
  </div>

  <div class="toast" id="toast"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/vincemattise/mattori-configurator@v17/mattori-configurator.js"></script>
